{% extends "base.html" %}

{% load static wagtailuserbar %}
{% load wagtailcore_tags %}
{% load wagtailcore_tags wagtailimages_tags %}

{% include_block page.body %}

{% block body_class %}home-body{% endblock %}

{% block extra_css %}
	<link rel="stylesheet" type="text/css" href="{% static 'css/homepage.css' %}">
{% endblock %}

	{% block content %}

	<article>
		{% for block in page.body %}
			{% if block.block_type == 'heading' %}
				<h2>{{ block.value }}</h2>
			{% elif block.block_type == 'featured_pages' %}
				<div class="row">
					{% for child in block.value %}
						{% if child.specific.featured_image %}
							{% include "home/includes/featured_page_link.html" with featured_page=child.specific %}
						{% endif %}
					{% endfor %}
				</div>
				{% for child in block.value %}
					{% if not child.specific.featured_image %}
						<div>
							<a class="featured-page-link" href="{{ child.url }}">{{ child.title }}</a>
						</div>
					{% endif %}
				{% endfor %}
			{% elif block.block_type == 'image' %}
				{% image block.value width-900 class="img-responsive" %}
			{% else %}
				<section class="block_type-{{ block.block_type }}">
				   {% include_block block %}
				</section>
			{% endif %}
		{% endfor %}

		<h2>Latest</h2>
		<div class="row">
			{% for latest_page in page.latest %}
				<div class="col-md-4 featured-page-text">
					<a class="featured-page-link featured-page-title" href="{{ latest_page.url }}">
						{{ latest_page.title }}
					</a>
					<div>{{ latest_page.date }}</div>
					<div class="featured-page-details">
						{{ latest_page.short_description | richtext }}
					</div>
				</div>
			{% endfor %}
		</div>
	</article>

{% endblock %}
